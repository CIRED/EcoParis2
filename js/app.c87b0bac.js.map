{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Layers.vue?83df","webpack:///./src/App.vue?99d5","webpack:///./src/components/Intro.vue?24ee","webpack:///src/components/Intro.vue","webpack:///./src/components/Intro.vue?21f1","webpack:///./src/components/Intro.vue","webpack:///./src/components/ZoomControl.vue?9c71","webpack:///src/components/ZoomControl.vue","webpack:///./src/components/ZoomControl.vue?b509","webpack:///./src/components/ZoomControl.vue?f0d9","webpack:///./src/components/LocationControl.vue?1f5c","webpack:///src/components/LocationControl.vue","webpack:///./src/components/LocationControl.vue?071a","webpack:///./src/components/LocationControl.vue","webpack:///./src/components/Layers.vue?3420","webpack:///src/components/Layers.vue","webpack:///./src/components/Layers.vue?1d7e","webpack:///./src/components/Layers.vue","webpack:///./src/components/Map.vue?f9e9","webpack:///./src/map.js","webpack:///src/components/Map.vue","webpack:///./src/components/Map.vue?3baf","webpack:///./src/components/Map.vue","webpack:///./src/components/Sidebar.vue?5c82","webpack:///./src/components/Histogram.vue?d33e","webpack:///src/components/Histogram.vue","webpack:///./src/components/Histogram.vue?11b6","webpack:///./src/components/Histogram.vue","webpack:///src/components/Sidebar.vue","webpack:///./src/components/Sidebar.vue?d975","webpack:///./src/components/Sidebar.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?bcb1","webpack:///./src/update.js","webpack:///./src/components/Map.vue?357b","webpack:///./src/components/Intro.vue?6183","webpack:///./src/components/LocationControl.vue?9aba","webpack:///./src/components/ZoomControl.vue?bf9b","webpack:///./src/components/Histogram.vue?f3a7","webpack:///./src/helpers.js","webpack:///./src/layers.js","webpack:///./src/shared.js","webpack:///./src/components/Sidebar.vue?652c","webpack:///./src/shapes.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Layers_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Layers_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","Appvue_type_template_id_391da146_render","this$1","this","_vm","_h","$createElement","_c","_self","attrs","id","onDismiss","introVisible","currentLayerPath","defaultLayer","_e","staticClass","onLocation","loc","currentLocation","layers","model","callback","$$v","expression","onHist","x","y","currentHistogramX","currentHistogramY","onSchools","appRefs","$refs","ref","EV_path","staticRenderFns","Introvue_type_template_id_8e00bca0_render","_m","_v","href","on","click","$event","preventDefault","Introvue_type_template_id_8e00bca0_staticRenderFns","src","Introvue_type_script_lang_js_","props","components_Introvue_type_script_lang_js_","component","componentNormalizer","options","__file","Intro","ZoomControlvue_type_template_id_5796146f_render","ZoomControlvue_type_template_id_5796146f_staticRenderFns","ZoomControlvue_type_script_lang_js_","components_ZoomControlvue_type_script_lang_js_","ZoomControl_component","ZoomControl","LocationControlvue_type_template_id_58e9f847_render","locate","class","search","active","searchExpanded","toggleSearch","type","keyup","keyCode","LocationControlvue_type_template_id_58e9f847_staticRenderFns","LocationControlvue_type_script_lang_js_","mounted","_this","api","google","maps","places","Autocomplete","searchInput","setFields","setOptions","strictBounds","setBounds","north","config","viewport","topLatitude","south","bottomLatitude","west","leftLongitude","east","rightLongitude","addListener","place","getPlace","geometry","location","lat","lng","methods","_this2","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","focus","keypressSearch","e","alert","JSON","stringify","components_LocationControlvue_type_script_lang_js_","LocationControl_component","LocationControl","Layersvue_type_template_id_c5e2b39c_render","_l","layer","hidden","path","select","domProps","innerHTML","_s","icon","loaded","Layersvue_type_template_id_c5e2b39c_staticRenderFns","Layersvue_type_script_lang_js_","loading","$emit","components_Layersvue_type_script_lang_js_","Layers_component","Layers","Mapvue_type_template_id_7bd138c9_render","Mapvue_type_template_id_7bd138c9_staticRenderFns","helpers_f","require","update_f","layers_f","shapes_f","shared","map","element","EV_svg_element","EV_circle_svg_element","legend_element","error","interComm_shape","voronoi_shape","onHistChange","default_tl","L","LatLng","Config","default_br","setLocationFromCurrent","setLocation","initialBounds","latLngBounds","color_legend_canvas","d3","append","color_legend_svg","createMap","geoJson","style","blankStyle","addTo","svg","projectPoint","point","latLngToLayerPoint","stream","transform","geo","pathGenerator","projection","defs","defs_path","attr","imgs","selectAll","enter","update_clip","emptyOpacity","fadedOpacity","fullOpacity","svg_EV","svg_circle_EV","imgs_EV","shape_EV","features","voronoi","defineVoronoi","interComms","defineInterComms","markerIcon","iconUrl","iconSize","iconAnchor","markerElement","canvas","document","createElement","update_parameters","hide","updateMap","loadLayer","setLayer","setEVLayer","Mapvue_type_script_lang_js_","urlInterComm","urlVoronoi","queue","defer","json","await","v","_displayMap","circle_svg","legend","_displayMap2","slicedToArray","setTextUrban","keys","forEach","layerPath","watch","_ref","_ref2","components_Mapvue_type_script_lang_js_","Map_component","Map","Sidebarvue_type_template_id_001ded9d_render","title","content","Sidebarvue_type_template_id_001ded9d_staticRenderFns","alt","Histogramvue_type_template_id_1bee94a0_render","Histogramvue_type_template_id_1bee94a0_staticRenderFns","updatePlot","that","Plotly","react","graph","histfunc","xbins","end","size","start","margin","b","displayModeBar","Histogramvue_type_script_lang_js_","components_Histogramvue_type_script_lang_js_","Histogram_component","Histogram","Sidebarvue_type_script_lang_js_","components","components_Sidebarvue_type_script_lang_js_","Sidebar_component","Sidebar","Appvue_type_script_lang_js_","reduce","sidebarVisible","src_Appvue_type_script_lang_js_","App_component","App","Vue","productionTip","render","h","$mount","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","cachedLayers","clip_projectPoint","default_tl_point","tl_lat","tl_lng","default_br_point","br_lat","br_lng","width","height","latLng","tx","ty","clip_transform","clip_path","update_EV_preview","mouseX","mouseY","layer_path","substr","svg_width","parseInt","svg_height","tl","br","tl_pixels","latLngToContainerPoint","image_width","image_height","update_chart","layerURL","voro","info","voronoi_hist","interComm_hist","range","update_text_school","Urban_cooling","Ecole_path","updateMarker","currentGeoLat","currentGeoLng","concat","console","log","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Map_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Map_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Intro_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Intro_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LocationControl_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LocationControl_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ZoomControl_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ZoomControl_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Histogram_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Histogram_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","colorSchemeDict","0","interpolateRdYlBu","1","interpolateBuGn","2","interpolateCool","loadContainmentFile","url","fetch","then","res","parse","MAP_TILES","MAP_ATTRIB","isWithinParis","some","geoContains","zoomControl","fitBounds","base","tileLayer","minZoom","maxZoom","attribution","setZoom","panTo","getColorsFromScheme","colorSchemeId","currentScheme","fillScale","scale_canvas","scale_svg","colorScale","minValue","maxValue","legendheight","legendwidth","top","right","bottom","left","node","ctx","getContext","legendscale","image","createImageData","rgb","g","putImageData","legendaxis","axisRight","scale","scaleLinear","domain","tickSize","ticks","computeColorRange","percentiles","colors","domain_percentiles","unshift","domainLength","rangeLength","intermediateDomain","intermediateScale","linear","range_out","feature","opacity","fillOpacity","pixels","tempContext","len","workersCount","finished","segmentLength","blockSize","voronoi_means","voronoi_counts","interComm_means","interComm_counts","firstVoronoiByInterComm","onWorkEnded","canvasData","index","interComm_counts_portion","interComm_means_portion","voronoi_counts_portion","voronoi_means_portion","firstVoronoiByInterCommPortion","voronoi_hist_portion","interComm_hist_portion","hist_buckets","toDataURL","layerUrl","useColorScheme","colorScheme","domain_range","domain_continuous","range_continuous","color","voronoiContainment","interCommContainment","worker","Worker","onmessage","getImageData","postMessage","voronoiContainmentData","interCommContainmentData","numVoronois","numInterComms","colorDomain","colorRange","currentGaoLng","_","min_value","max_value","highligthedInterComm","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Sidebar_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Sidebar_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","oneIfInInterComm","interCommIndex","oneIfInInterComm_","datum","highlightedInterComm","event","clientX","clientY","layerX","layerY","BBox","getBBox","neBound","layerPointToLatLng","swBound"],"mappings":"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","file":"js/app.c87b0bac.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.introVisible)?_c('Intro',{attrs:{\"onDismiss\":function () {_vm.introVisible = false; this$1.currentLayerPath = this$1.defaultLayer}}}):_vm._e()],1),_c('section',{staticClass:\"menu\"},[_c('LocationControl',{attrs:{\"onLocation\":function (loc) { return this$1.currentLocation = loc; }}}),_c('Layers',{attrs:{\"layers\":_vm.layers},model:{value:(_vm.currentLayerPath),callback:function ($$v) {_vm.currentLayerPath=$$v},expression:\"currentLayerPath\"}}),_c('ZoomControl')],1),_c('section',{staticClass:\"container\"},[_c('Map',{attrs:{\"layers\":_vm.layers,\"currentLayerPath\":_vm.currentLayerPath,\"currentLocation\":_vm.currentLocation,\"onHist\":function (x,y) {this$1.currentHistogramX = x; this$1.currentHistogramY = y;},\"onSchools\":function (n) {},\"appRefs\":this.$refs}}),_c('svg',{ref:\"circle_svg\",staticClass:\"EV-circle-svg\"}),_c('svg',{ref:\"svg\",staticClass:\"EV-svg\"}),_c('div',{ref:\"legend\",staticClass:\"color_legend\"}),_c('Sidebar',{attrs:{\"layers\":_vm.layers,\"currentLayerPath\":_vm.currentLayerPath,\"EV_path\":_vm.EV_path,\"currentHistogramX\":_vm.currentHistogramX,\"currentHistogramY\":_vm.currentHistogramY}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"intro\"},[_vm._m(0),_c('p',[_vm._v(\"Découvrez l'influence de la nature sur votre vie à Paris.\")]),_c('section',{staticClass:\"buttons\"},[_c('a',{staticClass:\"button accent\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onDismiss($event)}}},[_vm._v(\"Commencer\")]),_c('a',{staticClass:\"button\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onDismiss($event)}}},[_vm._v(\"Visite guidée\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',[_vm._v(\"\\n    EcoParis\\n    \"),_c('img',{attrs:{\"src\":\"assets/parrot.svg\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"intro\">\n    <h1>\n      EcoParis\n      <img src=\"assets/parrot.svg\">\n    </h1>\n\n    <p>Découvrez l'influence de la nature sur votre vie à Paris.</p>\n\n    <section class=\"buttons\">\n      <a @click.prevent=\"onDismiss\" href=\"#\" class=\"button accent\">Commencer</a>\n      <a @click.prevent=\"onDismiss\" href=\"#\" class=\"button\">Visite guidée</a>\n    </section>\n  </section>\n</template>\n\n<script>\nexport default {\n  props: ['onDismiss']\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n.intro {\n  z-index: 1001;\n  position: fixed;\n  display: flex;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  color: #fff;\n  // background: linear-gradient(to right, rgba(#1fa2ff, .95), rgba(#12d8fa, .95), rgba(#a6ffcb, .95));\n  // background: linear-gradient(to right, rgba(#4cb8c4, .95), rgba(#3cd3ad, .95));\n  // background: linear-gradient(to right, rgba(#56ab2f, .95), rgba(#a8e063, .95));\n  background: linear-gradient(to right, rgba(#ffe259, .93), rgba(#ffa751, .95));\n}\n\n.intro.fade-enter-active, .intro.fade-leave-active {\n  transition: opacity .3s;\n}\n\n.intro.fade-enter, .intro.fade-leave-to {\n  opacity: 0;\n}\n\n.intro h1, .intro p {\n  text-shadow: 0 0 2px rgba(0, 0, 0, .4);\n}\n\n.intro h1 {\n  font-family: 'Cedarville Cursive';\n  font-size: 38pt;\n  margin: 0 0 -.3rem;\n  position: relative;\n}\n\n.intro h1 img {\n  position: absolute;\n  width: 64px;\n  top: -8px;\n  right: -30px;\n}\n\n.intro p {\n  font-size: 21pt;\n  margin: 0;\n}\n\n.intro .buttons {\n  margin-top: 60px;\n}\n\n.intro .button {\n  margin-left: 10px;\n  margin-right: 10px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Intro.vue?vue&type=template&id=8e00bca0&\"\nimport script from \"./Intro.vue?vue&type=script&lang=js&\"\nexport * from \"./Intro.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Intro.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Intro.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"zoom-control\"},[_c('a',{staticClass:\"minus\",attrs:{\"href\":\"#\"}},[_vm._v(\"-\")]),_c('a',{staticClass:\"plus\",attrs:{\"href\":\"#\"}},[_vm._v(\"+\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"zoom-control\">\n    <a href=\"#\" class=\"minus\">-</a>\n    <a href=\"#\" class=\"plus\">+</a>\n  </section>\n</template>\n\n<script>\nexport default {}\n</script>\n\n<style>\n.zoom-control {\n  width: 80px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ZoomControl.vue?vue&type=template&id=5796146f&\"\nimport script from \"./ZoomControl.vue?vue&type=script&lang=js&\"\nexport * from \"./ZoomControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ZoomControl.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"ZoomControl.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"location-control\"},[_c('a',{staticClass:\"locate\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.locate($event)}}},[_c('i',{staticClass:\"fas fa-map-marker-alt\"})]),_c('div',{class:{search: true, active: _vm.searchExpanded}},[_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleSearch($event)}}},[(_vm.searchExpanded)?_c('i',{staticClass:\"fas fa-search-minus\"}):_c('i',{staticClass:\"fas fa-search-location\"})]),_c('input',{ref:\"searchInput\",staticClass:\"autocomplete\",attrs:{\"type\":\"text\"},on:{\"keyup\":function($event){if(!('button' in $event)&&$event.keyCode!==27){ return null; }_vm.searchExpanded = false}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"location-control\">\n    <a href=\"#\" class=\"locate\"\n        @click.prevent=\"locate\">\n      <i class=\"fas fa-map-marker-alt\"></i>\n    </a>\n    <div :class=\"{search: true, active: searchExpanded}\">\n      <a href=\"#\" @click.prevent=\"toggleSearch\">\n        <i v-if=\"searchExpanded\" class=\"fas fa-search-minus\"></i>\n        <i v-else class=\"fas fa-search-location\"></i>\n      </a>\n      <input type=\"text\" class=\"autocomplete\" ref=\"searchInput\"\n        @keyup.27=\"searchExpanded = false\">\n    </div>\n  </section>\n</template>\n\n<script>\nimport Config from '../config.json'\n\nexport default {\n  props: ['onLocation'],\n\n  data: () => ({\n    searchExpanded: false\n  }),\n\n  mounted() {\n    const api = new google.maps.places.Autocomplete(this.$refs.searchInput)\n    api.setFields(['geometry'])\n    api.setOptions({strictBounds: true})\n    api.setBounds({\n      north: Config.viewport.topLatitude,\n      south: Config.viewport.bottomLatitude,\n      west: Config.viewport.leftLongitude,\n      east: Config.viewport.rightLongitude,\n    })\n\n    api.addListener('place_changed', () => {\n      const place = api.getPlace()\n\n      if (!place.geometry) {\n        this.onLocation(null, null)\n        return\n      }\n\n      this.searchExpanded = false\n      this.onLocation([\n        place.geometry.location.lat(),\n        place.geometry.location.lng()\n      ])\n    })\n  },\n\n  methods: {\n    locate() {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(pos => {\n          this.onLocation([pos.coords.latitude, pos.coords.longitude])\n        })\n      }\n    },\n\n    toggleSearch() {\n      this.searchExpanded ^= true\n      this.$refs.searchInput.focus()\n    },\n\n    keypressSearch(e) {\n      alert(JSON.stringify(e))\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n.location-control a i {\n  color: #111;\n  font-size: 18px;\n}\n\n.location-control .search {\n  display: flex;\n  align-items: center;\n\n  a {\n    border: 0 !important;\n  }\n\n  .autocomplete {\n    transition: width .25s;\n    height: 30px;\n    width: 0;\n    padding: 0;\n    border: 0 none;\n  }\n}\n\n.location-control .search.active .autocomplete {\n  width: 300px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LocationControl.vue?vue&type=template&id=58e9f847&\"\nimport script from \"./LocationControl.vue?vue&type=script&lang=js&\"\nexport * from \"./LocationControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LocationControl.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"LocationControl.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"layers\"},[_c('h3',[_vm._v(\"Couches\")]),_c('div',{staticClass:\"buttons\"},_vm._l((_vm.layers),function(layer){return (!layer.hidden)?_c('a',{class:{ active: _vm.value == layer.path },on:{\"click\":function($event){$event.preventDefault();_vm.select(layer)}}},[_c('span',{staticClass:\"icon\",domProps:{\"innerHTML\":_vm._s(layer.icon)}}),_c('span',[_vm._v(_vm._s(layer.name))]),(!layer.loaded)?_c('div',{staticClass:\"loader-tile-grid\"},[_c('div',{staticClass:\"loader-tile loader-tile1\"}),_c('div',{staticClass:\"loader-tile loader-tile2\"}),_c('div',{staticClass:\"loader-tile loader-tile3\"}),_c('div',{staticClass:\"loader-tile loader-tile4\"}),_c('div',{staticClass:\"loader-tile loader-tile5\"}),_c('div',{staticClass:\"loader-tile loader-tile6\"}),_c('div',{staticClass:\"loader-tile loader-tile7\"}),_c('div',{staticClass:\"loader-tile loader-tile8\"}),_c('div',{staticClass:\"loader-tile loader-tile9\"})]):_vm._e()]):_vm._e()}))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"layers\">\n    <h3>Couches</h3>\n\n    <div class=\"buttons\">\n      <a v-for=\"layer in layers\"\n        v-if=\"!layer.hidden\"\n        :class=\"{ active: value == layer.path }\"\n        @click.prevent=\"select(layer)\">\n        <span class=\"icon\" v-html=\"layer.icon\"></span>\n        <span>{{ layer.name }}</span>\n\n        <div v-if=\"!layer.loaded\" class=\"loader-tile-grid\">\n          <div class=\"loader-tile loader-tile1\"></div>\n          <div class=\"loader-tile loader-tile2\"></div>\n          <div class=\"loader-tile loader-tile3\"></div>\n          <div class=\"loader-tile loader-tile4\"></div>\n          <div class=\"loader-tile loader-tile5\"></div>\n          <div class=\"loader-tile loader-tile6\"></div>\n          <div class=\"loader-tile loader-tile7\"></div>\n          <div class=\"loader-tile loader-tile8\"></div>\n          <div class=\"loader-tile loader-tile9\"></div>\n        </div>\n      </a>\n    </div>\n  </section>\n</template>\n\n<script>\n\nexport default {\n  props: ['layers', 'value'],\n\n  methods: {\n    select(layer) {\n      if (!layer.loading) {\n        this.$emit('input', layer.path)\n      }\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n.layers {\n  max-height: 600px;\n  height: 80%;\n  width: 80px;\n  border: 1px solid #bbb;\n  box-shadow: 0 0 3px rgba(#000, .2);\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n}\n\n.layers h3, .layers a {\n  text-transform: uppercase;\n}\n\n.layers h3 {\n  width: 100%;\n  margin: 0;\n  padding: 7px 0;\n  color: #666;\n  font-size: 11pt;\n  font-weight: normal;\n  text-align: center;\n}\n\n.layers .buttons {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.layers a {\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  outline: none;\n  cursor: pointer;\n\n  height: 80px;\n  text-decoration: none;\n  border-bottom: 1px solid #bbb;\n  color: #333;\n  font-size: 10pt;\n\n  &.active {\n    background: #f3f3f3;\n    box-shadow: inset 0 0 2px rgba(0, 0, 0, .1);\n  }\n\n  &:first-child {\n    border-top: 1px solid #bbb;\n  }\n\n  .icon {\n    font-size: 1rem;\n    margin-bottom: 3px;\n  }\n}\n\n// Source: http://tobiasahlin.com/spinkit/\n.loader-tile-grid {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  cursor: not-allowed;\n}\n\n.loader-tile-grid .loader-tile {\n  width: 33%;\n  height: 33%;\n  background-color: #fff;\n  float: left;\n\n  animation: loader-tileGridScaleDelay 1.3s infinite ease-in-out;\n}\n\n.loader-tile-grid .loader-tile1 { animation-delay: 0.2s; }\n.loader-tile-grid .loader-tile2 { animation-delay: 0.3s; }\n.loader-tile-grid .loader-tile3 { animation-delay: 0.4s; }\n.loader-tile-grid .loader-tile4 { animation-delay: 0.1s; }\n.loader-tile-grid .loader-tile5 { animation-delay: 0.2s; }\n.loader-tile-grid .loader-tile6 { animation-delay: 0.3s; }\n.loader-tile-grid .loader-tile7 { animation-delay: 0s; }\n.loader-tile-grid .loader-tile8 { animation-delay: 0.1s; }\n.loader-tile-grid .loader-tile9 { animation-delay: 0.2s; }\n\n@keyframes loader-tileGridScaleDelay {\n  0%, 70%, 100% {\n    transform: scale3D(1, 1, 1);\n  } 35% {\n    transform: scale3D(0, 0, 1);\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Layers.vue?vue&type=template&id=c5e2b39c&\"\nimport script from \"./Layers.vue?vue&type=script&lang=js&\"\nexport * from \"./Layers.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Layers.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Layers.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{ref:\"map\",staticClass:\"map\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Config from './config.json'\n\nvar helpers_f = require(\"./helpers.js\")\nvar update_f = require(\"./update.js\")\nvar layers_f = require(\"./layers.js\")\nvar shapes_f = require(\"./shapes.js\")\nvar shared = require(\"./shared.js\")\n\nexport default function(element, EV_svg_element, EV_circle_svg_element, legend_element, error, interComm_shape, voronoi_shape, onHistChange, onSchools) {\n  shared.interComm_shape = interComm_shape\n  shared.voronoi_shape = voronoi_shape\n  shared.onHistChange = onHistChange\n  shared.onSchools = onSchools\n  shared.legend_element = legend_element\n\n  const default_tl = new L.LatLng(\n    Config.viewport.topLatitude,\n    Config.viewport.leftLongitude\n  )\n  const default_br = new L.LatLng(\n    Config.viewport.bottomLatitude,\n    Config.viewport.rightLongitude\n  )\n  shared.initialBounds = L.latLngBounds(default_tl, default_br)\n\n  shared.color_legend_canvas = d3.select(legend_element)\n    .append(\"canvas\")\n\n  shared.color_legend_svg = d3.select(legend_element)\n    .append(\"svg\")\n  shared.color_legend_svg.append(\"g\")\n\n\n  /**\n   * Sets the position of the geolocation marker to the current position\n   * of the user (computed using the Geolocation API).\n   */\n  function setLocationFromCurrent() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(pos => {\n        helpers_f.setLocation(pos.coords.latitude, pos.coords.longitude)\n      })\n    }\n  }\n\n  setLocationFromCurrent()\n\n  helpers_f.createMap(element) //TODO: if the window is small, the zoom is too far (> 14) and the map is grey, untill we zoom in\n\n  L.geoJson(interComm_shape, {\n    style: helpers_f.blankStyle\n  }).addTo(shared.map); //needed! otherwise a svg isn't generated, we use this one for practical purposes\n\n  var svg = d3.select(element).select(\".leaflet-zoom-animated\")\n\n  function projectPoint(x, y) {\n    var point = shared.map.latLngToLayerPoint(new L.LatLng(y, x));\n    this.stream.point(point.x, point.y);\n  }\n  var transform = d3.geo.transform({\n    point: projectPoint\n  });\n  shared.pathGenerator = d3.geo.path()\n    .projection(transform);\n\n  var defs = svg.append(\"defs\");\n  shared.defs_path = defs.append(\"path\")\n    .attr(\"id\", \"clip_path\")\n\n  defs.append(\"clipPath\")\n    .attr(\"id\", \"clip\")\n    .append(\"use\")\n    .attr(\"xlink:href\", \"#clip_path\");\n\n  shared.imgs = svg.selectAll(\"image\").data([0])\n    .enter()\n    .append(\"svg:image\")\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr(\"xlink:href\", \"\")\n    .attr(\"clip-path\", \"\")\n\n  update_f.update_clip()\n\n\n  var emptyOpacity = 0\n  var fadedOpacity = 0.4\n  var semiFullOpacity = 0.7\n  var fullOpacity = 1\n\n  shared.svg_EV = d3.select(EV_svg_element)\n    .attr(\"style\",\"display:none;\")\n\n  shared.svg_circle_EV = d3.select(EV_circle_svg_element)\n    .attr(\"style\",\"display:none;\")\n\n  shared.imgs_EV = shared.svg_EV.selectAll(\"image\").data([0])\n    .enter()\n    .append(\"svg:image\")\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr(\"xlink:href\", \"\")\n\n  var shape_EV = shared.svg_EV.append(\"g\")\n  shape_EV\n    .selectAll(\"path\")\n    .data([interComm_shape.features[0]])\n    .enter().append('path')\n    .attr('vector-effect', 'non-scaling-stroke')\n    .style('stroke', \"#000\")\n    .style(\"fill-opacity\", 0)\n    .style(\"stroke-opacity\", 1)\n\n\n  shared.voronoi = shapes_f.defineVoronoi(svg,emptyOpacity,fullOpacity)\n\n  shared.interComms = shapes_f.defineInterComms(svg,emptyOpacity,fadedOpacity,fullOpacity)\n\n  shared.markerIcon = {\n    iconUrl: 'assets/marker.png',\n    iconSize: [24, 24],\n    iconAnchor: [12, 24]\n  }\n\n  shared.markerElement = svg.append(\"g\").selectAll(\"image\").data([0])\n    .enter()\n    .append(\"svg:image\")\n    .attr(\"xlink:href\", shared.markerIcon.iconUrl)\n    .attr(\"width\", shared.markerIcon.iconSize[0])\n    .attr(\"height\", shared.markerIcon.iconSize[1])\n    .attr('visibility', 'hidden')\n    .style(\"pointer-events\", \"none\")\n\n  shared.canvas = document.createElement(\"canvas\")\n\n  shared.update_parameters = {\n    hide: true,\n  };\n\n  shared.map.on('viewreset', function(){update_f.updateMap()})\n\n  return [layers_f.loadLayer, layers_f.setLayer, helpers_f.setLocation, layers_f.setEVLayer]\n}","<template>\n  <section ref=\"map\" class=\"map\">\n  </section>\n</template>\n\n<script>\nimport Config from '../config.json'\nimport displayMap from '../map'\n\nexport default {\n  props: ['layers', 'currentLayerPath', 'currentLocation', 'onHist', 'onSchools', 'appRefs', 'onSchools'],\n  data: () => ({\n    loadLayer: () => {},\n    setLayer: () => {},\n    setLocation: () => {},\n  }),\n\n  /**\n   * Triggers when the component has been mounted.\n   * This is used to create the Leaflet map and bind the event handlers.\n   */\n  mounted () {\n    var urlInterComm = 'data/intercommunalites.geojson'\n    var urlVoronoi = 'data/voronois.json'\n\n    queue()\n      .defer(d3.json, urlInterComm)\n      .defer(d3.json, urlVoronoi)\n      .await((e, d, v) => {\n        [this.loadLayer, this.setLayer, this.setLocation, this.setEVLayer, this.setTextUrban] =\n          displayMap(this.$refs.map,this.appRefs.svg,this.appRefs.circle_svg,this.appRefs.legend, e, d, v, this.onHist, this.onSchools)\n\n        Object.keys(Config.layers).forEach(layerPath => {\n\n        this.layers[layerPath].path=layerPath;\n        this.loadLayer(\n          layerPath,\n          () => {\n            this.layers[layerPath].loaded = true\n            \n            if (layerPath == Config.EV_path){\n              this.setEVLayer(layerPath)\n            }          \n          }\n        )})\n\n        this.setLayer(this.currentLayerPath)\n      })\n  },\n\n  watch: {\n    /**\n     * Watches changes to the currentLayerPath prop, and updates the map.\n     */\n    currentLayerPath(layerPath) {\n      this.setLayer(layerPath)\n    },\n\n    /**\n     * Watches changes to the currentLocation prop, and updates the marker.\n     */\n    currentLocation([lat, lng]) {\n      this.setLocation(lat, lng)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n.map {\n  flex: 1;\n}\n\n.leaflet-overlay-pane {\n  mix-blend-mode: multiply;\n\n  image {\n    image-rendering: optimizespeed;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=7bd138c9&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Map.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"sidebar\"},[(_vm.currentLayerPath && _vm.layers[_vm.currentLayerPath].loaded)?_c('div',[_c('h2',[_vm._v(_vm._s(_vm.layers[_vm.currentLayerPath].title))]),_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.layers[_vm.currentLayerPath].content)}}),(_vm.currentLayerPath != _vm.EV_path)?_c('Histogram',{attrs:{\"x\":_vm.currentHistogramX,\"y\":_vm.currentHistogramY}}):_vm._e()],1):_c('div',{staticClass:\"split\"},[_vm._m(0),_vm._m(1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',[_c('h2',[_vm._v(\"Bienvenue sur EcoParis.\")]),_c('p',[_vm._v(\"EcoParis est une visualisation interactive des données cartographiques des services écosystémiques en territoires urbains et péri-urbains en région Ile-de-France issues du projet \"),_c('a',{attrs:{\"href\":\"https://idefese.wordpress.com/\"}},[_vm._v(\"IDEFESE\")]),_vm._v(\".\")]),_c('p',[_vm._v(\"Pour commencer, vous pouvez sélectionner une couche à afficher parmi des mesures de rétention \"),_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"de phosphore\")]),_vm._v(\" et \"),_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"d'azote\")]),_vm._v(\", des mesures de \"),_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"réduction de la température\")]),_vm._v(\" due à la végétation ou encore de \"),_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"valeur économique\")]),_vm._v(\" des régions.\")]),_c('p',[_vm._v(\"Vous pouvez aussi choisir d'afficher l'évolution estimée de ces mesures à l'horizon 2025 dans un scénario de changement climatique.\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"about\"},[_c('p',[_vm._v(\"EcoParis a été conçu par des élèves du cours de \"),_c('a',{attrs:{\"href\":\"https://edu.epfl.ch/coursebook/en/data-visualization-COM-480\"}},[_vm._v(\"Data Visualization\")]),_vm._v(\" de l'EPFL, avec l'aide de Perrine Hamel du projet \"),_c('a',{attrs:{\"href\":\"https://naturalcapitalproject.stanford.edu/\"}},[_vm._v(\"Natural Capital Project\")]),_vm._v(\" de Stanford.\")]),_c('section',{staticClass:\"slideshow\"},[_c('a',{attrs:{\"href\":\"https://www.epfl.ch/\"}},[_c('img',{attrs:{\"src\":\"https://mediacom.epfl.ch/files/content/sites/mediacom/files/EPFL-Logo.jpg\",\"alt\":\"Logo EPFL\"}})]),_c('a',{attrs:{\"href\":\"https://naturalcapitalproject.stanford.edu/\"}},[_c('img',{attrs:{\"src\":\"https://idefese.files.wordpress.com/2018/11/image5.jpg?w=172&h=171\",\"alt\":\"Logo NatCap\"}})])])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"graph\",staticClass:\"graph-box\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div ref=\"graph\" class=\"graph-box\"></div>\n</template>\n\n<script>\n/**\n * Updates the Plotly plot according to this.data.\n */\nconst updatePlot = (that) =>{\n  Plotly.react(that.$refs.graph, [{\n    x: that.x,\n    y: that.y,\n    type: 'histogram',\n    histfunc: \"sum\",\n    xbins: {\n      end: 256, \n      size: 1, \n      start: 0\n    }\n  }], {\n    margin: {\n      l: 35,\n      r: 35,\n      t: 5,\n      b: 20,\n    },\n  }, {\n    displayModeBar: false,\n  })\n}\n\nexport default {\n  props: ['x','y'],\n\n  mounted() {\n    updatePlot(this)\n  },\n\n  watch: {\n    /**\n     * Watches changes to the data prop, and updates the histogram.\n     */\n    x() {\n      updatePlot(this)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n.graph-box {\n  height: 300px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Histogram.vue?vue&type=template&id=1bee94a0&\"\nimport script from \"./Histogram.vue?vue&type=script&lang=js&\"\nexport * from \"./Histogram.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Histogram.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Histogram.vue\"\nexport default component.exports","<template>\n  <section class=\"sidebar\">\n    <div v-if=\"currentLayerPath && layers[currentLayerPath].loaded\">\n      <h2>{{ layers[currentLayerPath].title }}</h2>\n      <div v-html=\"layers[currentLayerPath].content\"></div>\n      <Histogram v-if=\"currentLayerPath != EV_path\" :x=\"currentHistogramX\"\n                 :y=\"currentHistogramY\"/>\n    </div>\n\n    <div v-else class=\"split\">\n      <article>\n        <h2>Bienvenue sur EcoParis.</h2>\n\n        <p>EcoParis est une visualisation interactive des données cartographiques des services écosystémiques en territoires urbains et péri-urbains en région Ile-de-France issues du projet <a href=\"https://idefese.wordpress.com/\">IDEFESE</a>.</p>\n\n        <p>Pour commencer, vous pouvez sélectionner une couche à afficher parmi des mesures de rétention <a href=\"#\">de phosphore</a> et <a href=\"#\">d'azote</a>, des mesures de <a href=\"#\">réduction de la température</a> due à la végétation ou encore de <a href=\"#\">valeur économique</a> des régions.</p>\n\n        <p>Vous pouvez aussi choisir d'afficher l'évolution estimée de ces mesures à l'horizon 2025 dans un scénario de changement climatique.</p>\n      </article>\n\n      <article class=\"about\">\n        <p>EcoParis a été conçu par des élèves du cours de <a href=\"https://edu.epfl.ch/coursebook/en/data-visualization-COM-480\">Data Visualization</a> de l'EPFL, avec l'aide de Perrine Hamel du projet <a href=\"https://naturalcapitalproject.stanford.edu/\">Natural Capital Project</a> de Stanford.</p>\n\n        <section class=\"slideshow\">\n          <a href=\"https://www.epfl.ch/\">\n            <img src=\"https://mediacom.epfl.ch/files/content/sites/mediacom/files/EPFL-Logo.jpg\" alt=\"Logo EPFL\">\n          </a>\n          <a href=\"https://naturalcapitalproject.stanford.edu/\">\n            <img src=\"https://idefese.files.wordpress.com/2018/11/image5.jpg?w=172&h=171\" alt=\"Logo NatCap\">\n          </a>\n        </section>\n      </article>\n    </div>\n  </section>\n</template>\n\n<script>\nimport Histogram from './Histogram.vue'\n\nexport default {\n  props: ['layers', 'currentLayerPath', 'EV_path', 'currentHistogramX', 'currentHistogramY'],\n  components: { Histogram },\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n\n#espacesVerts {\n  height: 300px;\n  width: 100%;\n  margin-top: 25px;\n  margin-bottom: 5px;\n}\n.sidebar {\n  z-index: 500;\n  width: 450px;\n  max-width: 30%;\n  box-sizing: border-box;\n  padding: 40px;\n  text-align: justify;\n\n  background: #fff;\n  box-shadow: 0 0 2px rgba(0, 0, 0, .3);\n  overflow: auto;\n}\n\n.sidebar .split {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.sidebar p {\n  margin: 30px 0;\n}\n\n.sidebar h2 {\n  margin-top: 0;\n}\n\n.sidebar .about {\n  font-style: italic;\n}\n\n.sidebar .slideshow {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  margin: 40px 0 20px;\n\n  a {\n    height: 90px;\n  }\n\n  img {\n    height: 100%;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sidebar.vue?vue&type=template&id=001ded9d&\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=js&\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Sidebar.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Sidebar.vue\"\nexport default component.exports","<template>\n  <div id=\"app\">\n    <transition name=\"fade\">\n      <Intro v-if=\"introVisible\" :onDismiss=\"() => {introVisible = false; this.currentLayerPath = this.defaultLayer}\" />\n    </transition>\n\n    <section class=\"menu\">\n      <LocationControl\n        :onLocation=\"loc => this.currentLocation = loc\" />\n      <Layers\n        :layers=\"layers\"\n        v-model=\"currentLayerPath\" />\n      <ZoomControl />\n    </section>\n    <section class=\"container\">\n      <Map\n        :layers=\"layers\"\n        :currentLayerPath=\"currentLayerPath\"\n        :currentLocation=\"currentLocation\"\n        :onHist=\"(x,y) => {this.currentHistogramX = x; this.currentHistogramY = y;}\" \n        :onSchools=\"(n) => {}\"\n        :appRefs=\"this.$refs\"/>\n      <svg ref=\"circle_svg\" class=\"EV-circle-svg\"></svg> \n      <svg ref=\"svg\" class=\"EV-svg\"></svg> \n      <div ref=\"legend\" class=\"color_legend\"></div>\n      <Sidebar\n        :layers=\"layers\"\n        :currentLayerPath=\"currentLayerPath\"\n        :EV_path=\"EV_path\"\n        :currentHistogramX=\"currentHistogramX\"\n        :currentHistogramY=\"currentHistogramY\" />\n    </section>\n  </div>\n</template>\n\n<script>\nimport Config from './config.json'\n\nimport Intro from './components/Intro.vue'\nimport ZoomControl from './components/ZoomControl.vue'\nimport LocationControl from './components/LocationControl.vue'\nimport Layers from './components/Layers.vue'\nimport Map from './components/Map.vue'\nimport Sidebar from './components/Sidebar.vue'\n\nvar defaultLayer = Config.EV_path\n\nexport default {\n  data: () => ({\n    layers: Object.keys(Config.layers).reduce((m, layerPath) => {\n      m[layerPath] = Config.layers[layerPath]\n      m[layerPath].loaded = false\n      m[layerPath].path=layerPath\n      return m\n    }, {}),\n\n    // currentLayer: 'data/p_export.json',\n    currentLayerPath: null,\n    currentLocation: null,\n    currentHistogramX: null,\n    currentHistogramY: null,\n    introVisible: true,\n    sidebarVisible: false,\n    defaultLayer: defaultLayer,\n    EV_path: Config.EV_path,\n  }),\n\n  components: { Intro, ZoomControl, LocationControl, Layers, Map, Sidebar }\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\nhtml, body {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  font-size: 15pt;\n}\n\n#app {\n  width: 100%;\n  height: 100%;\n  font-family: 'IBM Plex Sans', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\nh2 {\n  font-size: 1.2rem;\n}\n\np {\n  font-family: 'Crimson Text', serif;\n}\n\n.button {\n  text-decoration: none;\n  margin: 1.2rem;\n  font-size: 14pt;\n  padding: 9px 13px;\n  border: 1px solid #fff;\n  color: #fff;\n  text-transform: uppercase;\n  font-weight: 300;\n  transition: padding .2s;\n  position: relative;\n  outline: none;\n\n  &:hover {\n    padding: 9px 16px;\n  }\n\n  &.accent {\n    background: rgba(#fff, .2);\n  }\n}\n\n.menu {\n  z-index: 500;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 50px;\n  display: flex;\n  flex-direction: column;\n\n  justify-content: center;\n}\n\n.container {\n  display: flex;\n  background: #000;\n  width: 100%;\n  height: 100%;\n}\n\n.zoom-control, .location-control {\n  height: 40px;\n  border: 1px solid #bbb;\n  box-shadow: 0 0 3px rgba(#000, .2);\n  background: #fff;\n  display: flex;\n  margin: 20px 0;\n  flex-basis: content;\n\n  a {\n    outline: none;\n    height: 40px;\n    width: 39px;\n    font-family: Courier New;\n    font-size: 18pt;\n    line-height: 40px;\n    text-align: center;\n    text-decoration: none;\n    color: #000;\n  }\n\n  a:first-child {\n    border-right: 1px solid #bbb;\n  }\n}\n\n.EV-svg {\n  border-radius:50%;\n  width:120px;\n  height:120px;\n  border: 1px solid #000;\n  position:absolute;\n  background-color: #fff;\n  display: flex;\n  pointer-events: none;\n  top: -120px;\n}\n\n.EV-circle-svg {\n  border-radius:50%;\n  width:120px;\n  height:120px;\n  border: 1px solid #000;\n  position:absolute;\n  background-color: #fff0;\n  display: flex;\n  pointer-events: none;\n  top: -120px;\n}\n\n.color_legend {\n  width:80px;\n  height:200px;\n  position:absolute;\n  background-color: #fff0;\n  display: inline-block;\n  pointer-events: none;\n  top: 50px;\n  right: 30%;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=391da146&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App)\n}).$mount('#app')\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","var Config = require('./config.json')\nvar helpers_f = require('./helpers.js')\nvar shared = require('./shared.js')\n\nexports.update_clip = function() {\n  var map = shared.map\n  var cachedLayers = shared.cachedLayers\n  var currentLayerPath = shared.currentLayerPath\n  var defs_path = shared.defs_path\n  function clip_projectPoint(x, y) {\n\n    var default_tl_point = map.latLngToLayerPoint([cachedLayers[currentLayerPath].tl_lat, cachedLayers[currentLayerPath].tl_lng])\n    var default_br_point = map.latLngToLayerPoint([cachedLayers[currentLayerPath].br_lat, cachedLayers[currentLayerPath].br_lng])\n\n    var width = (default_br_point.x - default_tl_point.x)\n    var height = (default_br_point.y - default_tl_point.y)\n\n    var point = map.latLngToLayerPoint(L.latLng(y, x))\n\n    var tx = (point.x - default_tl_point.x) / (default_br_point.x - default_tl_point.x) * (width - 1)\n    var ty = (point.y - default_tl_point.y) / (default_br_point.y - default_tl_point.y) * (height - 1)\n\n    this.stream.point(tx, ty);\n  }\n\n  var clip_transform = d3.geo.transform({\n    point: clip_projectPoint\n  });\n  var clip_path = d3.geo.path()\n    .projection(clip_transform);\n  defs_path.attr(\"d\", clip_path)\n}\n\nexports.update_EV_preview = function(mouseX,mouseY){\n  var svg_EV = shared.svg_EV\n  var map = shared.map\n  var cachedLayers = shared.cachedLayers\n  var imgs_EV = shared.imgs_EV\n\n  var layer_path = Config.EV_path\n  if (!cachedLayers[Config.EV_path]){\n    return\n  }\n\n  svg_EV.style(\"width\").substr(0,svg_EV.style(\"width\").length-2)\n  var svg_width = parseInt(svg_EV.style(\"width\").substr(0,svg_EV.style(\"width\").length-2))\n  var svg_height = parseInt(svg_EV.style(\"height\").substr(0,svg_EV.style(\"width\").length-2))\n\n  svg_EV.attr(\"style\",\"top:\"+(mouseY - svg_height - 30)+\"; left:\"+(mouseX - svg_width/2)+\"; display:'';\")\n  shared.svg_circle_EV.attr(\"style\",\"top:\"+(mouseY - svg_height/2)+\"; left:\"+(mouseX - svg_width/2)+\"; display:'';\")\n\n\n  var tl = L.latLng(cachedLayers[layer_path].tl_lat,cachedLayers[layer_path].tl_lng)\n  var br = L.latLng(cachedLayers[layer_path].br_lat,cachedLayers[layer_path].br_lng)\n\n  var tl_pixels = map.latLngToContainerPoint(tl)\n  var br_pixels = map.latLngToContainerPoint(br)\n\n  var image_width = (map.latLngToLayerPoint(br).x - map.latLngToLayerPoint(tl).x)\n  var image_height = (map.latLngToLayerPoint(br).y - map.latLngToLayerPoint(tl).y)\n\n  imgs_EV.attr('width', image_width)\n  imgs_EV.attr('height', image_height)\n\n  imgs_EV.attr(\"transform\",\n    \"translate(\" +\n      (+ tl_pixels.x - mouseX + svg_width/2) + \",\" +\n      (+ tl_pixels.y - mouseY + svg_height/2) + \")\"\n  )\n}\n\nexports.update_chart = function(i,layerURL,voro) {\n  var cachedLayers = shared.cachedLayers\n  var info = cachedLayers[layerURL]\n  if (!info) {\n    return;\n  }\n  var data=[]\n  if (voro == true) {\n    data = info.voronoi_hist[i]\n  } else {\n    data = info.interComm_hist[i]\n  }\n\n  data[0]=0 // ignore 0 values\n  shared.onHistChange(helpers_f.range(256),data)\n\n}\n\nexports.update_text_school = function(i,layerURL,voro){\n  var cachedLayers = shared.cachedLayers\n  if(layerURL==Config.Urban_cooling){\n    var info = cachedLayers[Config.Ecole_path]\n    if (!info) {\n        return;\n    }\n    var data=[]\n    if (voro == true) {\n      data = info.voronoi_hist[i]\n    } else {\n      data = info.interComm_hist[i]\n    }\n    shared.onSchools(data)\n    // change texte according to data \n  }\n  else{\n    shared.onSchools(null)\n  }\n}\n\n/**\n * Updates the marker element on the map with the right coordinates.\n */\nexports.updateMarker = function() {\n  var map = shared.map\n  var currentGeoLat = shared.currentGeoLat\n  var currentGeoLng = shared.currentGeoLng\n  var markerElement = shared.markerElement\n  if (currentGeoLat && currentGeoLng) {\n    const point = map.latLngToLayerPoint([currentGeoLat, currentGeoLng])\n    const x = point.x - shared.markerIcon.iconAnchor[0]\n    const y = point.y - shared.markerIcon.iconAnchor[1]\n    markerElement.attr('visibility', 'visible')\n    markerElement.attr('transform', `translate(${x}, ${y})`)\n  } else {\n    markerElement.attr('visibility', 'hidden')\n  }\n}\n\nexports.updateMap = function() {//add here everything that could potentially change\n  var map = shared.map\n  var cachedLayers = shared.cachedLayers\n  var voronoi = shared.voronoi\n  var interComms = shared.interComms\n  var imgs = shared.imgs\n  var imgs_EV = shared.imgs_EV\n  var update_parameters = shared.update_parameters\n  var path = shared.pathGenerator\n\n  if (update_parameters.hide) {\n    console.log('hidden!')\n    interComms.attr('visibility', 'hidden')\n    voronoi.attr('visibility', 'hidden')\n    imgs.attr('visibility', 'hidden')\n    imgs_EV.attr('visibility', 'hidden')\n    return;\n  } else {\n    interComms.attr('visibility', 'visible')\n    voronoi.attr('visibility', 'visible')\n    imgs.attr('visibility', 'visible')\n    imgs_EV.attr('visibility', 'visible')\n  }\n\n  var tl = update_parameters.tl\n  var br = update_parameters.br\n\n  console.log('UPDATING')\n  var width = (map.latLngToLayerPoint(br).x - map.latLngToLayerPoint(tl).x)\n  var height = (map.latLngToLayerPoint(br).y - map.latLngToLayerPoint(tl).y)\n  imgs.attr(\"transform\",\n    function(d) {\n      var point = map.latLngToLayerPoint(tl)\n      return \"translate(\" +\n        point.x + \",\" +\n        point.y + \")\";\n    }\n  )\n\n  imgs.attr('width', width)\n  imgs.attr('height', height)\n  interComms.attr(\"d\", path)\n  voronoi.attr(\"d\", path)\n  exports.update_clip()\n  exports.updateMarker()\n  shared.svg_EV.attr(\"style\",\"display:none;\")\n  shared.svg_circle_EV.attr(\"style\",\"display:none;\")\n}","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=style&index=0&lang=scss&\"","const colorSchemeDict = {\n  0:d3.interpolateRdYlBu,\n  1:d3.interpolateBuGn,\n  2:d3.interpolateCool\n}\n\nvar shared =  require('./shared.js')\n\n/**\n * Loads a JSON containment file and parses it.\n */\nexports.loadContainmentFile = function(url) {\n  return fetch(url)\n    .then(res => res.json())\n    .then(json => {\n      json.data = JSON.parse(json.data)\n      return json\n    })\n}\n\nconst MAP_TILES = 'https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png'\nconst MAP_ATTRIB = '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n/**\n * Creates a Leaflet map of the Paris area and returns it.\n */\nexports.createMap = function(element) {\n  shared.map = L.map(element, {\n    zoomControl: false\n  })\n  var map = shared.map\n  map.fitBounds(shared.initialBounds)\n\n  const base = L.tileLayer(MAP_TILES, {\n    minZoom: 9,\n    maxZoom: 14, // Toner Light won't zoom further than 14.\n    attribution: MAP_ATTRIB\n  })\n\n  base.addTo(map)\n}\n\n/**\n * Returns whether a given point is within the Paris region.\n */\nfunction isWithinParis(point) {\n  return interComm_shape.features.some(s => d3.geoContains(s, point))\n}\n\n/**\n * Sets the position of the geolocation marker.\n */\nexports.setLocation = function(lat, lng) {\n  if (!lat || !lng || !isWithinParis([lng, lat])) {\n    lat = null\n    lng = null\n    shared.map.fitBounds(shared.initialBounds)\n  } else {\n    shared.map.setZoom(11)\n    shared.map.panTo(new L.LatLng(lat, lng))\n  }\n\n  shared.currentGeoLat = lat\n  shared.currentGeoLng = lng\n  update_f.updateMarker()\n}\n\n\nexports.getColorsFromScheme = function(colorSchemeId){\n  var currentScheme = colorSchemeDict[colorSchemeId]\n  var range = []\n  for (var i=0; i<256; ++i){\n    range.push(currentScheme(i/255))\n  }\n  return range\n}\n\n\n// create continuous color legend\nexports.fillScale = function(scale_canvas, scale_svg, colorScale, minValue, maxValue) {\n  var legendheight = 200,\n      legendwidth = 80,\n      margin = {top: 10, right: 40, bottom: 10, left: 2};\n\n  var canvas = scale_canvas\n    .attr(\"height\", legendheight - margin.top - margin.bottom)\n    .attr(\"width\", 1)\n    .style(\"height\", (legendheight - margin.top - margin.bottom) + \"px\")\n    .style(\"width\", (legendwidth - margin.left - margin.right) + \"px\")\n    .style(\"border\", \"1px solid #000\")\n    .style(\"position\", \"absolute\")\n    .style(\"top\", (margin.top) + \"px\")\n    .style(\"left\", (margin.left) + \"px\")\n    .node();\n\n  var ctx = canvas.getContext(\"2d\");\n\n\n  var legendscale = function(height) {\n    return colorScale(((legendheight - margin.top - margin.bottom) - height)/ (legendheight - margin.top - margin.bottom) * 255)\n  }\n\n  var image = ctx.createImageData(1, (legendheight - margin.top - margin.bottom));\n\n  for (var i=0; i<legendheight - margin.top - margin.bottom; ++i){\n    var c = d3.rgb(legendscale(i));\n    image.data[4*i] = c.r;\n    image.data[4*i + 1] = c.g;\n    image.data[4*i + 2] = c.b;\n    image.data[4*i + 3] = 255;\n  }\n  \n  ctx.putImageData(image, 0, 0);\n\n  var legendaxis = d3.axisRight()\n    .scale(d3.scaleLinear().domain([maxValue,minValue]).range([1,legendheight - margin.bottom - margin.top]))\n    .tickSize(6)\n    .ticks(8);\n\n  var svg = scale_svg\n    .attr(\"height\", (legendheight) + \"px\")\n    .attr(\"width\", (legendwidth) + \"px\")\n    .style(\"position\", \"absolute\")\n    .style(\"left\", \"0px\")\n    .style(\"top\", \"0px\")\n\n  svg\n    .select(\"g\")\n    .attr(\"class\", \"axis\")\n    .attr(\"transform\", \"translate(\" + (legendwidth - margin.left - margin.right + 3) + \",\" + (margin.top) + \")\")\n    .call(legendaxis);\n}\n\n\nexports.computeColorRange = function(percentiles,colors){\n  var domain_percentiles = percentiles.slice()\n  domain_percentiles.unshift(0)\n  domain_percentiles.push(255)\n\n  var domainLength = domain_percentiles.length\n  var rangeLength  = colors.length\n\n  var intermediateDomain = []\n  for (var i=0; i<rangeLength; ++i){\n    intermediateDomain[i] = i/(rangeLength-1)\n  }\n  var intermediateScale = d3.scale.linear().domain(intermediateDomain).range(colors)\n\n  var range_out = []\n  for (var i=0; i<domainLength; ++i){\n    var t = i/(domainLength-1)\n    range_out.push(intermediateScale(t))\n  }\n  return [domain_percentiles,range_out]\n}\n\n\nexports.blankStyle = function(feature) {\n  return {\n    opacity: 0,\n    fillOpacity: 0\n  };\n}\n\nexports.range = function(length){\n  var range = []\n  for (var i=0; i<length; ++i){\n    range[i]=i\n  }\n  return range\n}","var Config = require('./config.json')\nvar helpers_f = require('./helpers.js')\nvar shared = require('./shared.js')\nvar update_f = require(\"./update.js\")\n\n\n/**\n * Loads, pre-processes and caches the layer with the given path.\n * This includes:\n * - Fetching the layer's JSON data;\n * - Fetching containment files.\n * - Preparing arrays for means, counts and histograms.\n * - Dispatching those computations to worker threads.\n */\nexports.loadLayer = function(path, callback) {\n  var canvas = shared.canvas\n  var voronoi_shape = shared.voronoi_shape\n  var interComm_shape = shared.interComm_shape\n  if (shared.cachedLayers[path]) {\n    callback();\n    return;\n  }\n\n  fetch(path)\n    .then(res => res.json())\n    .then(json => {\n      json.data = JSON.parse(json.data)\n      json.percentiles = JSON.parse(json.percentiles)\n\n      var pixels = json.data;\n\n      canvas.width = json.width\n      canvas.height = json.height\n\n      var tempContext = canvas.getContext(\"2d\");\n      tempContext.createImageData(canvas.width, canvas.height);\n\n      var len = canvas.height * canvas.width;\n      var workersCount = 1;\n      var finished = 0;\n      var segmentLength = len / workersCount;\n      var blockSize = canvas.height / workersCount;\n\n      //initalize means and counts arrays\n      var voronoi_means = []\n      var voronoi_counts = []\n      var voronoi_hist = {}\n\n      for (var i = 0; i < voronoi_shape.features.length; ++i) {\n        voronoi_counts[i] = 0\n        voronoi_means[i] = 0\n        voronoi_hist[i] = []\n        for (var j=0; j<256; ++j){\n          voronoi_hist[i][j]=0\n        }\n      }\n\n      var interComm_means = []\n      var interComm_counts = []\n      var interComm_hist = {}\n\n      for (var i = 0; i < interComm_shape.features.length; ++i) {\n        interComm_counts[i] = 0\n        interComm_means[i] = 0\n        interComm_hist[i] = []\n        for (var j=0; j<256; ++j){\n          interComm_hist[i][j]=0\n        }\n      }\n\n      shared.firstVoronoiByInterComm = []\n      var firstVoronoiByInterComm = shared.firstVoronoiByInterComm\n\n      for (var i = 0; i < interComm_shape.features.length; ++i) {\n        firstVoronoiByInterComm[i] = 10000 //bigger than the max, ~670\n      }\n\n      // Return a promise.\n      var onWorkEnded = function(e) {\n        var canvasData = e.data.result;\n        var index = e.data.index;\n\n        var interComm_counts_portion = e.data.interComm_counts\n        var interComm_means_portion = e.data.interComm_means\n        var voronoi_counts_portion = e.data.voronoi_counts\n        var voronoi_means_portion = e.data.voronoi_means\n        var firstVoronoiByInterCommPortion = e.data.firstVoronoiByInterComm\n        var voronoi_hist_portion = e.data.voronoi_hist\n        var interComm_hist_portion = e.data.interComm_hist\n\n        for (var i = 0; i < voronoi_shape.features.length; ++i) {\n          voronoi_counts[i] += voronoi_counts_portion[i]\n          voronoi_means[i] += voronoi_means_portion[i]\n\n          for (var j=0; j<256; ++j){\n            voronoi_hist[i][j] += voronoi_hist_portion[i][j]\n          }\n        }\n\n        for (var i = 0; i < interComm_shape.features.length; ++i) {\n          interComm_counts[i] += interComm_counts_portion[i]\n          interComm_means[i] += interComm_means_portion[i]\n\n          for (var j=0; j<256; ++j){\n            interComm_hist[i][j] += interComm_hist_portion[i][j]\n          }\n          \n\n          if (firstVoronoiByInterComm[i] > firstVoronoiByInterCommPortion[i]) {\n            firstVoronoiByInterComm[i] = firstVoronoiByInterCommPortion[i]\n          }\n        }\n\n        tempContext.putImageData(canvasData, 0, blockSize * index);\n        finished++;\n\n        if (finished == workersCount) {\n          if(path == Config.Ecole_path){\n            // Here we count the number of schools\n              for (var i = 0; i < voronoi_shape.features.length; ++i) {\n                  voronoi_means[i] /= 255\n              }\n              for (var i = 0; i < interComm_shape.features.length; ++i) {\n                  interComm_means[i] /= 255\n              }\n          }\n          else{\n            for (var i = 0; i < voronoi_shape.features.length; ++i) {\n              if (voronoi_counts[i] != 0) {\n                voronoi_means[i] /= voronoi_counts[i]\n              }\n            }\n            for (var i = 0; i < interComm_shape.features.length; ++i) {\n              if (interComm_counts[i] != 0) {\n                interComm_means[i] /= interComm_counts[i]\n              }\n            }\n          }\n              \n          var hist_buckets = [70, 140]; //TODO: change acodring to layer (hard-coded...)\n\n          var value = canvas.toDataURL(\"png\");\n          //imgs.attr(\"xlink:href\", value)\n          \n          shared.cachedLayers[path] = {\n            \"url\": value,\n            \"tl_lat\": json.tl_lat,\n            \"tl_lng\": json.tl_lng,\n            \"br_lat\": json.br_lat,\n            \"br_lng\": json.br_lng,\n            \"width\": canvas.width,\n            \"height\": canvas.height,\n            \"voronoi_means\": voronoi_means,\n            \"interComm_means\": interComm_means,\n            \"voronoi_hist\": voronoi_hist,\n            \"interComm_hist\": interComm_hist,\n            \"hist_buckets\": hist_buckets,\n            \"percentiles\" : json.percentiles,\n            \"layerUrl\": path\n          }\n\n          callback();\n        }\n      };\n\n      // FIXME(liautaud): Nested callbacks is a code smell.\n      // FIXME(liautaud): This should be done only once.\n\n      var domain = helpers_f.range(256)\n      var range = []\n      if (Config.layers[path].useColorScheme){\n        range = helpers_f.getColorsFromScheme(Config.layers[path].colorScheme)\n      }\n      else{\n        var domain_range = helpers_f.computeColorRange(json.percentiles,Config.layers[path].colors)\n        var domain_continuous = domain_range[0]\n        var range_continuous = domain_range[1]\n        const colorScale = d3.scale.linear()\n          .range(range_continuous).domain(domain_continuous)\n\n        for (var i=0; i<256; ++i){\n          var color = d3.rgb(colorScale(i))\n          range.push(\"rgb(\"+color.r+\",\"+color.g+\",\"+color.b+\")\")\n        }\n      }\n\n      helpers_f.loadContainmentFile(\"data/voronoi_cont.json\").then(voronoiContainment => {\n        helpers_f.loadContainmentFile(\"data/intercomm_cont.json\").then(interCommContainment => {\n          for (var index = 0; index < workersCount; index++) {\n            var worker = new Worker(\"assets/pictureProcessor.js\");\n            worker.onmessage = onWorkEnded;\n            var canvasData = tempContext.getImageData(0, blockSize * index, canvas.width, blockSize);\n            worker.postMessage({\n              canvasData: canvasData,\n              pixels: pixels,\n              index: index,\n              length: segmentLength,\n              width: canvas.width,\n              height: canvas.height,\n              voronoiContainmentData: voronoiContainment.data,\n              interCommContainmentData: interCommContainment.data,\n              numVoronois: voronoi_shape.features.length,\n              numInterComms: interComm_shape.features.length,\n              tl_lat: json.tl_lat,\n              tl_lng: json.tl_lng,\n              br_lat: json.br_lat,\n              br_lng: json.br_lng,\n              colorDomain: domain,\n              colorRange: range\n            });\n          }\n        })\n      })\n    })\n\n  // TODO(liautaud): Return a Promise.\n}\n\n\n/**\n * Changes the current layer to the one with a given path.\n */\nexports.setLayer = function(layerPath) {\n  var update_parameters = shared.update_parameters\n  var imgs = shared.imgs\n\n  if (!layerPath) {\n    update_parameters.hide = true\n    update_f.updateMap()\n    return;\n  }\n\n  this.loadLayer(layerPath,() => {\n    if (layerPath == Config.EV_path){ //TODO: add parameter \"AlwaysShowLayer\" in config?\n      imgs.attr(\"clip-path\", \"\")\n    }\n    else{\n      imgs.attr(\"clip-path\", \"url(#clip)\")\n    }\n    // Once the layer is loaded, we can get it from the cache.\n    const layer = shared.cachedLayers[layerPath]\n\n    update_parameters.tl = new L.LatLng(layer.tl_lat, layer.tl_lng)\n    update_parameters.br = new L.LatLng(layer.br_lat, layer.br_lng)\n    update_parameters.currentGeoLat = shared.currentGeoLat\n    update_parameters.currentGaoLng = shared.currentGeoLng\n\n    var min = 0\n    var max = 255\n\n    var domain = []\n    var range = []\n    if (Config.layers[layerPath].useColorScheme){\n      domain = helpers_f.range(256)\n      range = helpers_f.getColorsFromScheme(Config.layers[layerPath].colorScheme)\n    }\n    else{\n      var domain_range =helpers_f.computeColorRange(layer.percentiles,Config.layers[layerPath].colors)\n      domain = domain_range[0]\n      range = domain_range[1]\n    }\n\n\n    \n\n    const colorScale = d3.scale.linear()\n      .range(range).domain(domain)\n    shared.voronoi.attr('fill', (_, i) =>{\n      //console.log(layer.voronoi_means[i],colorScale(layer.voronoi_means[i]))\n      if (layerPath == Config.EV_path){\n        return \"#00000011\" //transparent\n      }\n      return colorScale(layer.voronoi_means[i])})\n\n    min = 0//Math.min(...layer.interComm_means)\n    max = 255//Math.max(...layer.interComm_means)\n\n    shared.interComms.attr('fill', (_, i) =>{\n      //console.log(layer.interComm_means[i],colorScale(layer.interComm_means[i]))\n      if (layerPath == Config.EV_path){\n        return \"#00000011\" //transparent\n      }\n      return colorScale(layer.interComm_means[i])})\n\n\n    // Reset the width and height of the canvas.\n    shared.canvas.width = layer.width\n    shared.canvas.height = layer.height\n\n    // Update the bounding box and current coordinates.\n    update_parameters.hide = false\n\n    update_f.updateMap()\n    shared.currentLayerPath = layerPath\n    imgs.attr('xlink:href', layer.url)\n\n    if (layerPath == Config.EV_path){\n      //TODO: show color legend, but discrete!\n      d3.select(shared.legend_element).style(\"display\",\"none\")\n        .style(\"border\", \"1px solid #0000\")\n    }\n    else{\n      helpers_f.fillScale(shared.color_legend_canvas,shared.color_legend_svg,colorScale,Config.layers[layerPath].min_value,Config.layers[layerPath].max_value)\n      d3.select(shared.legend_element).style(\"background-color\",\"#fff\")\n      d3.select(shared.legend_element).style(\"display\",\"\")\n        .style(\"border\", \"1px solid #000\")\n    }\n    \n  })\n}\n\nexports.setEVLayer = function(path){\n  shared.imgs_EV.attr(\"xlink:href\", shared.cachedLayers[Config.EV_path].url)\n}","//this file contains a set of variables. Those variables should be treated as global variables, and can be used anywhere\n//used because otherwise, we would have either a 800 lines file, or 15 parameters functions...\n\nexports.cachedLayers = {} //placehoder for the layers, to compute them only once\n\nexports.currentLayerPath = \"\" //path of the currently selected layer\n\nexports.map = null //reference to the leaflet map\n\nexports.currentGeoLat = null //current latitude of the cursor\n\nexports.currentGeoLng = null //current longitude of the cursos\n\nexports.svg_EV = null //reference to the svg of the \"espaces verts\"\n\nexports.svg_circle_EV = null //reference to the svg of the circle around the cursot\n\nexports.interComms = null //reference to the interComms element, i.e. a d3.selectAll(\"path\")\n\nexports.voronoi = null //reference to the voronoi element, i.e. a d3.selectAll(\"path\")\n\nexports.imgs = null //reference to the current layer image, i.e. a d3.selectAll(\"image\")\n\nexports.imgs_EV = null //reference to the \"espaces verts\" image, i.e. a d3.selectAll(\"image\")\n\nexports.update_parameters = {} //parameters used by the update function, such as tl/br coordinates, or a \"hide\" boolean\n\nexports.markerElement = null //reference to marker element, i.e. a d3.selectAll(\"image\")\n\nexports.canvas = null //reference to the canvas used to generate layers\n\nexports.voronoi_shape = null //shapes of the voronois, content of the geojson\n\nexports.interComm_shape = null //shapes of the interComms, content of the geojson\n\nexports.firstVoronoiByInterComm = [] //array containing infos about the id of the first voronoi inside a given interComm, since voronoi ids are consecutive (e.g. ids 0-7 are inside interComm 0)\n\nexports.pathGenerator = null //pathGenerator, used to project paths (latLng) on the map\n\nexports.defs_path = null //reference to the d3.selectAll(\"path\") used to crop the layer to the current voronoi area\n\nexports.legend_element = null //element (div) that will contain the layer legend\n\nexports.color_legend_canvas = null //element (canvas) that will contain the layer legend (the colors)\n\nexports.color_legend_svg = null //element (div) that will contain the layer legend (the labels)\n\nexports.onSchools = null //onSchools callback function, called when the number of schools changes (e.g. we hovered another area)\n\nexports.onHistChange = null //onHistChange callback function, called when the histogram must be changed (e.g. we hovered another area)\n\nexports.highligthedInterComm = -1 //id of the currently highlighted interComm\n\nexports.initialBounds = null //initial bounds of the map (set to paris)\n\nexports.markerIcon = {} //informations about the marker icon","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=style&index=0&lang=scss&\"","var Config = require('./config.json')\nvar helpers_f = require('./helpers.js')\nvar shared = require('./shared.js')\nvar update_f = require(\"./update.js\")\n\nfunction oneIfInInterComm(interCommIndex) {\n  function oneIfInInterComm_(p, j) {\n    if (shared.firstVoronoiByInterComm[interCommIndex] <= j && (interCommIndex == shared.interComm_shape.features.length - 1 || shared.firstVoronoiByInterComm[interCommIndex + 1] > j)) {\n      return 1\n    } else {\n      return 0\n    }\n  }\n  return oneIfInInterComm_\n}\n\nexports.defineVoronoi = function(svg,emptyOpacity,fullOpacity){\n  return svg.append(\"g\").selectAll(\"path\")\n    .data(shared.voronoi_shape.features)\n    .enter().append('path')\n    .attr('d', shared.pathGenerator)\n    .attr('vector-effect', 'non-scaling-stroke')\n    .style('stroke', \"#666\")\n    .style(\"fill-opacity\", emptyOpacity)\n    .style(\"stroke-opacity\", emptyOpacity)\n    .on(\"mouseover\", function(d, i) {\n      d3.select(this).style('fill-opacity', emptyOpacity);\n      shared.defs_path.datum(d.geometry)\n      update_f.update_clip()\n      update_f.update_chart(i, shared.currentLayerPath, true, shared.onHistChange)\n      update_f.update_text_school(i, shared.currentLayerPath, false, shared.onSchools)\n    })\n    .on(\"mouseout\", function(d, i) {\n      if (shared.highlightedInterComm != -1) {\n        d3.select(this).style('fill-opacity', oneIfInInterComm(shared.highlightedInterComm)(d, i));\n        d3.select(this).style('stroke-opacity', oneIfInInterComm(shared.highlightedInterComm)(d, i));\n      }\n\n      shared.defs_path.datum([])\n      update_f.update_clip()\n      shared.svg_EV.attr(\"style\",\"display:none;\")\n      shared.svg_circle_EV.attr(\"style\",\"display:none;\")\n    })\n    .on(\"click\", function(d, i) {\n      shared.interComms.style(\"pointer-events\", \"all\")\n      shared.map.fitBounds(shared.initialBounds) // zoom back to paris\n      shared.highlightedInterComm = -1\n      shared.interComms.style(\"fill-opacity\", fullOpacity)\n      shared.voronoi.style(\"fill-opacity\", emptyOpacity)\n      shared.voronoi.style(\"stroke-opacity\", emptyOpacity)\n\n      shared.defs_path.datum([])\n      update_f.update_clip()\n      shared.svg_EV.attr(\"style\",\"display:none;\")\n      shared.svg_circle_EV.attr(\"style\",\"display:none;\")\n    })\n    .on(\"mousemove\",function(){\n      if (d3.event && d3.event.clientX && d3.event.clientY && shared.currentLayerPath != Config.EV_path){\n        update_f.update_EV_preview(d3.event.layerX,d3.event.layerY)\n      }\n      else{\n        shared.svg_EV.attr(\"style\",\"display:none;\")\n        shared.svg_circle_EV.attr(\"style\",\"display:none;\")\n      }\n    })\n}\n\nexports.defineInterComms = function(svg,emptyOpacity,fadedOpacity,fullOpacity){\n  return svg.append(\"g\").selectAll(\"path\")\n    .data(shared.interComm_shape.features)\n    .enter().append('path')\n    .attr('d', shared.path)\n    .attr('vector-effect', 'non-scaling-stroke')\n    .style('stroke', \"#333\")\n    .attr(\"fill\", \"#fff\")\n    .attr(\"fill-opacity\", fullOpacity)\n    .style(\"pointer-events\", \"all\")\n    .on(\"mouseover\", function(d, i) {\n      if (shared.highlightedInterComm != -1) {\n        if (i != shared.highlightedInterComm) {\n          d3.select(this).style('fill-opacity', fullOpacity);\n        } else {\n          d3.select(this).style('fill-opacity', emptyOpacity);\n        }\n      } else {\n        d3.select(this).style('fill-opacity', fadedOpacity);\n      }\n      //console.log(i)\n      update_f.update_chart(i, shared.currentLayerPath, true)\n      update_f.update_text_school(i, shared.currentLayerPath, false)\n    })\n    .on(\"mouseout\", function(d, i) {\n      if (shared.highlightedInterComm != -1) {\n        if (i == shared.highlightedInterComm) {\n          d3.select(this).style('fill-opacity', emptyOpacity);\n        } else {\n          d3.select(this).style('fill-opacity', fadedOpacity);\n        }\n      } else {\n        d3.select(this).style('fill-opacity', fullOpacity);\n      }\n      shared.svg_EV.attr(\"style\",\"display:none;\")\n      shared.svg_circle_EV.attr(\"style\",\"display:none;\")\n    })\n    .on(\"click\", function(d, i) {\n      shared.interComms.style(\"pointer-events\", \"all\") // now we can click/hover on every department\n      d3.select(this).style(\"pointer-events\", \"none\") // except the current one!\n\n      shared.interComms.style(\"fill-opacity\", fadedOpacity) //same here, show every intercomm except this one\n      d3.select(this).style('fill-opacity', emptyOpacity);\n      shared.highlightedInterComm = i\n\n\n      shared.voronoi.style(\"fill-opacity\", oneIfInInterComm(i))\n      shared.voronoi.style(\"stroke-opacity\", oneIfInInterComm(i))\n\n      var BBox = d3.select(this).node().getBBox()\n      var neBound = shared.map.layerPointToLatLng(L.point(BBox.x, BBox.y))\n      var swBound = shared.map.layerPointToLatLng(L.point(BBox.x + BBox.width, BBox.y + BBox.height))\n      shared.map.fitBounds(L.latLngBounds(neBound, swBound)) // zoom to department\n      shared.svg_EV.attr(\"style\",\"display:none;\")\n      shared.svg_circle_EV.attr(\"style\",\"display:none;\")\n    })\n    .on(\"mousemove\",function(){\n      if (d3.event && d3.event.clientX && d3.event.clientY && shared.currentLayerPath != Config.EV_path){\n        //console.log(d3.event)\n        update_f.update_EV_preview(d3.event.layerX,d3.event.layerY)\n      }\n      else{\n        shared.svg_EV.attr(\"style\",\"display:none;\")\n        shared.svg_circle_EV.attr(\"style\",\"display:none;\")\n      }\n    });\n}"],"sourceRoot":""}